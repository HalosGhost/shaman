\documentclass{latex2man}

\begin{Name}{2}{strfweather}{Sam Stuewe}{Fetch Weather Data}{strfweather - fetch weather data in native C}
    \Prog{strfweather} - fetch weather data in native C
\end{Name}

\section{Synopsis}
#include <weather.h>

size\_t strfweather (char * dest\_str, size\_t max, const char * format, const struct weather * weather);

\section{Description}
The \Prog{strfweather} function breaks down the weather struct according to the passed format and writes the result to dest\_str to, at most, max bytes.

The format specification is a null-terminated char array (a string) which consists of any number of conversion specifiers (each beginning with a \%) and normal text.
Any non-conversion specifier character will be copied verbatim to dest\_str (including the null byte).
Conversion specifiers, however, will be replaced with the unit they represent.
A list of conversion specifiers and their results are below.

\section{Format}
The following format specifiers are permitted:

\begin{verbatim}
%%    A literal percent sign

%a    Time of data receipt       (unixtime)

%b    Barometric pressure        (hectoPascals)

%c    Weather condition string

%C    Weather condition code

%d    Cloud coverage             (percent)

%h    Low temperature            (°F | °C)

%H    High temperature           (°F | °C)

%i    City ID number

%I    City name

%j    Country Code

%l    Latitude                   (degrees)

%L    Longitude                  (degrees)

%p    Precipitation              (in | mm)

%P    Relative humidity          (percent)

%s    Time of sunrise            (unixtime)

%S    Time of sunset             (unixtime)

%t    Current temperature        (°F | °C)

%T    Apparent temperature       (°F | °C)

%w    Sustained wind speed       (mph|kmph)

%W    Gusting wind speed         (mph|kmph)

%x    Wind heading               (degrees)

%X    Wind heading               (Cardinal / Ordinal direction)
\end{verbatim}

Since all non-conversion specifiers are copied verbatim, escape sequences (e.g., \Bs n and \Bs r) are allowed.
If the format specification calls for a string in the weather struct that is null, \Prog{strfweather} will write the string "Unavailable" in its place.

\section{Return Value}
Should the whole string be copied to dest\_str without truncating, \Prog{strfweather} will return the number of bytes written (the length of dest\_str).
If, however, the output to dest\_str should be truncated, \Prog{strfweather} will return 0.

\section{Author}
Copyright \copyright 2012-2013 Sam Stuewe\\
License GPLv2: GPL version 2 \URL{https://www.gnu.org/licenses/gpl-2.0.html} \\
This is free software: you are free to change and redistribute it. \\
There is NO WARRANTY, to the extent permitted by law.

Feature requests, bug reports and other comments may be submitted via GitHub (\URL{https://github.com/HalosGhost/shaman.git}) or E-mail (\Email{halosghost@archlinux.info})

\section{See Also}
\Cmd{shaman}{1}, \Cmd{libowm}{2}

\LatexManEnd
